# RoboComp-Components
A RoboComp component for near real-time end-to-end text recognition using EAST and CRNN.
This is the repository for the RoboComp component performing near real-time end-to-end Text Recognition. It uses OpenCV for text detection using [EAST](https://arxiv.org/abs/1704.03155). It also uses the open-source [implementation](https://github.com/meijieru/crnn.pytorch) of [CRNN](https://arxiv.org/abs/1507.05717) (in Pyorch) for performing text recognition on word-cropped images generated by EAST.

### Requirements:
- Python 2.7
- OpenCV
- PyTorch
- Imutils
- Numpy
- Pillow
- Torchvision
- python-Levenshtein
- Shapely

### Running the component:
```
cd robocomp/components/robocomp-robolab/components
```

Place the two component folders in this directory. Then, create a folder `assets` in the directory `textrecognition`. I have downloaded the required pre-trained models and placed [here](https://drive.google.com/drive/folders/1v4yJynd9pyyvO6HcVcfqtrYk9FBHrE71?usp=sharing). Download the files and place them in the `assets` folder.

Then, two new terminals need to be opened:
1. In the first terminal:
```
cd camerasimple
python src/camerasimple.py --Ice.Config=etc/config
```

2. In the second terminal:
```
cd textrecognition
python src/textrecognition.py --Ice.Config=etc/config
```

3. Finally, in the last terminal:
```
cd textrecognitionclient
python src/textrecognitionclient.py --Ice.Config=etc/config
```
The component can be run either in lexicon free or lexicon based mode. To run the component in lexicon based mode, replace the previous command with:
```
python src/textrecognitionclient.py --Ice.Config=etc/config --use_lexicon=True
```
It refers words within an edit distance of 2 from the lexicon free prediction, and outputs the one with the maximum conditional probability over the label distributions.

This should show the frames captured through the webcam, with a bounding box around each text, and the corresponding label associated with the text.

### References:
1. https://robocomp.github.io/web/gsoc/2018/sayali_deshpande/post2
2. https://github.com/meijieru/crnn.pytorch
